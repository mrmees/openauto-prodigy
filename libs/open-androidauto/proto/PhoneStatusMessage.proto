syntax = "proto3";

import "PhoneCallStateEnum.proto";

package oaa.proto.messages;

// Phone status update (msgId 0x8001 on Phone Status channel)
// Sent by phone to report call state changes
// APK class: waf.java (AA v16.1)
message PhoneStatusUpdate {
    // Active calls (empty = no calls / idle)
    repeated PhoneCall calls = 1;
    optional uint32 signal_strength = 2;  // APK: uint32, set from CarPhoneStatus.b
}

// APK class: wad.java (AA v16.1)
message PhoneCall {
    // APK: required enum wae — see PhoneCallStateEnum.proto
    optional enums.PhoneCallState.Enum call_state = 1;
    // APK: required uint32 — elapsed seconds since call connected
    // Previously misidentified as "direction" (0 = just connected)
    optional uint32 call_duration_seconds = 2;
    // Phone number (e.g. "+1 858-225-7702")
    optional string phone_number = 3;
    // Caller display name (e.g. "Spam Risk", contact name)
    optional string display_name = 4;
    // Contact ID (empty for unknown contacts)
    optional string contact_id = 5;
    // Contact photo as PNG image (sent with ACTIVE state)
    optional bytes contact_photo = 6;
}
