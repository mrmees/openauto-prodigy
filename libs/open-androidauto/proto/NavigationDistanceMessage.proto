syntax = "proto2";

package oaa.proto.messages;

// APK class: xnb — Navigation distance/ETA update (msgId 0x8007 on Nav channel)
// Sent periodically by phone during active navigation
message NavigationDistance {
    optional NavigationDistanceInfo info = 1;
    optional string eta_text = 2;
    optional int32 eta_seconds = 3;
    optional bytes distance_display = 8;
}

message NavigationDistanceInfo {
    optional NavigationDistanceValue distance = 1;
    repeated bytes alternate_display = 2;   // APK: repeated message (xnd = NavigationDistanceDisplay)
    optional bytes oneof_display = 4;       // APK: oneof message (xne), not yet decoded
}

message NavigationDistanceValue {
    optional int64 raw_meters = 1;          // APK: int64, raw distance in meters
    optional fixed32 value = 2;             // APK: fixed32 (was string — wire type mismatch)
    optional fixed32 unit = 3;              // APK: fixed32 (was int32 — wire type mismatch)
}
